//TODO:
//  for a canvas feel -- can use a large PNG
//  for a grid -- can use

import type {NextPage} from 'next'
import Head from "next/head";
import initializeApollo from "../lib/apollo";
import {gql, useQuery} from "@apollo/client";
import {useEffect} from "react";

export async function getStaticProps(context) {
    const client = initializeApollo();
    const {data} = await client.query({
        query: gql`query getRatings {
            ratings {
                id
                reviewer
                comment
                rate
            }
        }`
    })

    return {
        props: {
            ratings: data.ratings
        }
    }
}

const Home: NextPage = ({ratings}) => {
    const FETCH_RATINGS = gql`query getRatings {
        ratings {
            id
            reviewer
            comment
            rate
        }
    }`;

    const{loading, error, data} = useQuery(FETCH_RATINGS)

    useEffect(() => {
        console.log(data)
    }, [data])

    return (
        <>
            <Head>
                <title>Yug Gajjar</title>
                {/* TODO: meta tags */}
                <meta name="Yug Gajjar Portfolio" content="Generated by create next app"/>
                <link rel="icon" href="/favicon.ico"/>
            </Head>

            <main>
                {ratings.map((rating) => (
                    <div key={rating.id}>{rating.rate}</div>
                ))}
            </main>
        </>
    )
}

export default Home
